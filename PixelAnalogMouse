using UnityEngine;

public class PixelAnalogMouse : MonoBehaviour
{
    public Transform stick;
    public float maxRange = 0.5f;

    Vector3 startPos;

    void Start()
    {
        startPos = stick.localPosition;
    }

    void OnMouseDrag()
    {
        Vector3 worldPos = Camera.main.ScreenToWorldPoint(Input.mousePosition);
        worldPos.z = 0;

        Vector3 dir = worldPos - transform.position;
        dir = Vector3.ClampMagnitude(dir, maxRange);

        stick.localPosition = dir;
    }

    void OnMouseUp()
    {
        stick.localPosition = startPos;
    }

    public Vector2 GetDirection()
    {
        return stick.localPosition / maxRange;
    }
}